# Быстрый старт: Загрузка файлов для проектов

## Что нужно сделать для запуска

### 1. Настроить Yandex Cloud S3

В файле `b5-api-2/.env` добавьте:

```env
YANDEX_CLOUD_KEY=ваш_ключ_доступа
YANDEX_CLOUD_SECRET=ваш_секретный_ключ
YANDEX_CLOUD_REGION=ru-central1
YANDEX_CLOUD_BUCKET=mine2024
YANDEX_CLOUD_URL=https://storage.yandexcloud.net
YANDEX_CLOUD_ENDPOINT=https://storage.yandexcloud.net
```

Файлы будут загружаться в папку `bonus` внутри бакета.

### 2. Применить миграции

```bash
cd b5-db-2
php artisan migrate
```

Будут созданы таблицы:
- `project_sketches` - для эскизов
- `project_offers` - для коммерческих предложений

### 3. Готово!

Теперь в таблице техзаданий можно загружать множественные файлы для каждого проекта.

## Как использовать

1. Откройте страницу техзаданий (`/tz`)
2. В столбцах "Эскиз" и "КП" увидите:
   - Список уже загруженных файлов (если есть)
   - Кнопку "Загрузить" для добавления новых
3. Нажмите кнопку "Загрузить"
4. Выберите файл или перетащите его
5. Нажмите "Загрузить"

Каждый файл сохраняется как отдельная запись. Можно загружать неограниченное количество файлов.

## Архитектура

- **Один проект → Много эскизов** (project_sketches)
- **Один проект → Много КП** (project_offers)
- Каждый файл - отдельная запись в БД с метаданными
- Файлы хранятся в Yandex Cloud S3

## Поддерживаемые форматы

- Документы: PDF, DOC, DOCX, XLS, XLSX
- Изображения: PNG, JPG, JPEG
- Максимальный размер: 10MB
