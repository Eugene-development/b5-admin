# Обновление полей контрактов

## Изменения в интерфейсе

### Удалённые поля из формы добавления

Из формы добавления контракта (`ContractAddModal`) удалены поля:
- **Процент агента (%)** - теперь автоматически устанавливается в 0
- **Процент куратора (%)** - теперь автоматически устанавливается в 0

**Важно:** Эти поля остаются в форме редактирования (`ContractEditModal`), так как существующие контракты могут иметь эти значения.

### Удалённые столбцы из таблицы

Из таблицы контрактов (`ContractsTable`) удалены столбцы:
- **Планируемое завершение** - дата планируемого завершения контракта
- **Агент %** - процент агента
- **Куратор %** - процент куратора

### Переименованные поля

- **"Номер контракта"** → **"Контракт"**
- **"Дата заключения"** → **"Дата"**

## Технические детали

### Поля в базе данных

Согласно миграции `2025_11_13_120000_create_contracts_table.php`:

```php
$table->decimal('agent_percentage', 5, 2)->comment('Процент агента (0.00-100.00)');
$table->decimal('curator_percentage', 5, 2)->comment('Процент куратора (0.00-100.00)');
```

**Эти поля НЕ могут быть NULL** - они обязательны в базе данных.

### Значения по умолчанию

При создании нового контракта через форму добавления:
- `agent_percentage` = 0
- `curator_percentage` = 0

Эти значения можно изменить позже через форму редактирования.

## Структура таблицы контрактов

Текущие столбцы (после изменений):
1. № (порядковый номер)
2. Контракт (номер контракта)
3. Проект (название и регион)
4. Компания (название и ИНН)
5. Дата (дата заключения)
6. Статус (активен/неактивен)
7. Действия (просмотр, редактирование, удаление)

## Файлы изменены

- `b5-admin/src/lib/components/ContractAddModal.svelte` - удалены поля процентов
- `b5-admin/src/lib/components/ContractsTable.svelte` - удалены столбцы, переименованы заголовки
- `b5-admin/src/lib/components/ContractEditModal.svelte` - переименованы заголовки (поля процентов остались)
- `b5-admin/src/lib/components/ContractViewModal.svelte` - переименованы заголовки

## Дата изменений

13 ноября 2025
