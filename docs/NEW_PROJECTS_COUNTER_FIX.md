# Исправление счетчика новых проектов в сайдбаре

## Проблема

Красный восклицательный знак в сайдбаре рядом со ссылкой "Проекты" не исчезал после изменения статуса проекта с "Новый проект" на "Принят куратором".

## Причина

Счетчик новых проектов обновлялся только:
- При монтировании компонента layout
- Каждые 5 минут по таймеру

Но не обновлялся при изменении статуса проекта на странице `/projects`.

## Решение

Создан реактивный state `newProjectsCountState` для синхронизации счетчика между компонентами:

### Новые файлы

- `src/lib/state/newProjectsCount.svelte.js` - реактивный state для счетчика новых проектов

### Изменённые файлы

1. **`src/routes/(protected)/+layout.svelte`**
   - Заменена локальная переменная `newProjectsCount` на использование `newProjectsCountState`
   - Упрощена логика загрузки счетчика

2. **`src/routes/(protected)/projects/+page.svelte`**
   - Добавлен импорт `newProjectsCountState`
   - Добавлен вызов `newProjectsCountState.refresh()` после:
     - Принятия проекта куратором (`handleAcceptProject`)
     - Обновления проекта (`handleSaveProject`)
     - Удаления проекта (`confirmActionHandler`)

## Как это работает

1. При изменении статуса проекта вызывается `newProjectsCountState.refresh()`
2. State загружает актуальные данные с сервера
3. Все компоненты, использующие `newProjectsCountState.count`, автоматически обновляются
4. Красный восклицательный знак исчезает, если новых проектов больше нет

## Тестирование

1. Откройте страницу проектов
2. Убедитесь, что в сайдбаре есть красный восклицательный знак (если есть новые проекты)
3. Примите новый проект или измените его статус
4. Восклицательный знак должен исчезнуть сразу после изменения статуса
