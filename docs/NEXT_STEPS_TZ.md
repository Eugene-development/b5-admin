# Следующие шаги для функционала техзаданий

## Что нужно реализовать дальше

### 1. Создание техзадания

- [ ] Создать компонент `TzCreateModal.svelte`
- [ ] Добавить форму с полями:
  - Выбор проекта (dropdown)
  - Описание (textarea)
  - Комментарий (textarea)
  - Загрузка эскиза (file input)
  - Загрузка КП (file input)
- [ ] Реализовать GraphQL mutation `createTechnicalSpecification`
- [ ] Добавить кнопку "Создать ТЗ" на странице `/tz`

### 2. Редактирование техзадания

- [ ] Создать компонент `TzEditModal.svelte`
- [ ] Реализовать GraphQL mutation `updateTechnicalSpecification`
- [ ] Добавить функционал редактирования в `TzTable.svelte`

### 3. Загрузка файлов

- [ ] Настроить хранилище файлов (Laravel Storage)
- [ ] Добавить поля в миграцию:
  - `sketch_file` - путь к файлу эскиза
  - `sketch_filename` - оригинальное имя файла
  - `commercial_proposal` - путь к КП
  - `cp_filename` - оригинальное имя файла КП
- [ ] Создать endpoint для загрузки файлов
- [ ] Реализовать компонент загрузки файлов на фронтенде

### 4. Скачивание файлов

- [ ] Создать endpoint для скачивания файлов
- [ ] Реализовать функционал скачивания в `TzTable.svelte` и `TzViewModal.svelte`
- [ ] Добавить превью файлов (для изображений)

### 5. Интеграция с таблицей comments

Если нужно использовать отдельную таблицу `comments`:

- [ ] Создать связь между `technical_specifications` и `comments`
- [ ] Добавить поле `comment_id` в таблицу `technical_specifications`
- [ ] Обновить GraphQL схему для загрузки комментариев
- [ ] Реализовать функционал добавления/редактирования комментариев

### 6. Дополнительный функционал

- [ ] Фильтрация по проектам
- [ ] Фильтрация по кураторам
- [ ] Сортировка по дате создания
- [ ] Пагинация (если техзаданий много)
- [ ] Экспорт в Excel/PDF
- [ ] История изменений техзадания

## Приоритеты

1. **Высокий приоритет**
   - Создание техзадания
   - Редактирование техзадания

2. **Средний приоритет**
   - Загрузка файлов
   - Скачивание файлов

3. **Низкий приоритет**
   - Интеграция с таблицей comments
   - Дополнительный функционал

## Примечания

- Перед реализацией загрузки файлов нужно настроить Laravel Storage
- Рекомендуется использовать S3-совместимое хранилище для production
- Для локальной разработки можно использовать `storage/app/public`
