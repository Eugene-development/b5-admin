# –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ b5-admin

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ **—Å—Ç–∞—Ç—É—Å–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**, –∞ –Ω–µ –Ω–∞ –¥–æ–º–µ–Ω–∞—Ö. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Å—Ç–∞—Ç—É—Å–æ–º **"–ê–¥–º–∏–Ω"** (slug: `admin`) –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ª—é–±–æ–≥–æ –∏–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤.

## –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Å —Å–ª–µ–¥—É—é—â–∏—Ö –¥–æ–º–µ–Ω–æ–≤:
- `admin.bonus.band` - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `rubonus.pro` - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `localhost` (development) - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

## –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í —Å–∏—Å—Ç–µ–º–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–º. `UserStatusSeeder.php`):

| –°—Ç–∞—Ç—É—Å | Slug | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ—Å—Ç—É–ø |
|--------|------|----------|---------|
| **–ê–¥–º–∏–Ω** | `admin` | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã | `*` (–≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã) |
| –ö—É—Ä–∞—Ç–æ—Ä | `curators` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º–∏ –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ |
| –ú–µ–Ω–µ–¥–∂–µ—Ä | `managers` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ |
| –ê–≥–µ–Ω—Ç | `agents` | –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| –î–∏–∑–∞–π–Ω–µ—Ä | `designers` | –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| –ö–ª–∏–µ–Ω—Ç | `clients` | –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∑–∞–∫–∞–∑–æ–≤ | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ | `not-defined` | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ | –¢–æ–ª—å–∫–æ –æ–±—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–∞

### 1. Backend (Laravel - b5-auth-2)

**–ú–æ–¥–µ–ª—å User** (`b5-auth-2/app/Models/User.php`):
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–≤—è–∑—å `status` (—Å—Ç—Ä–æ–∫–∏ 60-62)
- –í JWT —Ç–æ–∫–µ–Ω –≤–∫–ª—é—á–µ–Ω—ã –ø–æ–ª—è: `email`, `name`, `status_id`, `type`, `email_verified`

**API Endpoint** (`/api/user`):
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º `status`
- –û–±—ä–µ–∫—Ç `status` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è: `id`, `slug`, `value`, `color`, `sort_order`

### 2. Frontend (SvelteKit - b5-admin)

#### a) –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (`src/lib/auth/status-permissions.js`)

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:

```javascript
export const USER_STATUSES = {
	ADMIN: 'admin',
	CURATORS: 'curators',
	MANAGERS: 'managers',
	// ...
};

export const STATUS_PERMISSIONS = {
	[USER_STATUSES.ADMIN]: {
		name: '–ê–¥–º–∏–Ω',
		description: '–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã',
		routes: '*', // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
		canManageUsers: true,
		canManageCompanies: true,
		canManageProjects: true,
		canManageFinances: true,
		canAccessReports: true
	},
	// ... –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç—É—Å—ã
};
```

**–§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞:**
- `hasRouteAccess(userStatusSlug, route)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É
- `getAllowedRoutes(userStatusSlug)` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
- `hasPermission(userStatusSlug, permission)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

#### b) Server-side –∑–∞—â–∏—Ç–∞ (`src/lib/auth/auth-guard.svelte.js`)

**–§—É–Ω–∫—Ü–∏—è `createAuthLoad`** (—Å—Ç—Ä–æ–∫–∏ 93-143):
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ä—à—Ä—É—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ç—Ä–æ–∫–∏ 120-128):
```javascript
if (requireAuth && isAuth && userData) {
	const userStatusSlug = userData.status?.slug;
	const currentRoute = url.pathname;

	// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç—É—Å–∞
	if (!hasRouteAccess(userStatusSlug, currentRoute)) {
		throw redirect(302, '/access-denied');
	}
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö** (`src/routes/(protected)/+layout.js`):
```javascript
export const load = createAuthLoad({
	redirectTo: '/login',
	requireAuth: true,
	requireEmailVerification: true
});
```

#### c) Client-side –Ω–∞–≤–∏–≥–∞—Ü–∏—è (`src/lib/utils/domainAccess.svelte.js`)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ slug —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function getUserStatusSlug() {
	const user = getCurrentUserData();
	return user?.status?.slug || null;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
export function hasAdminAccess() {
	const statusSlug = getUserStatusSlug();
	return statusSlug === USER_STATUSES.ADMIN;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—É–Ω–∫—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
export function shouldShowNavItem(path) {
	const statusSlug = getUserStatusSlug();
	if (!statusSlug) return false;
	return hasRouteAccess(statusSlug, path);
}
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**
```javascript
export function getNavigationVisibility() {
	const statusSlug = getUserStatusSlug();

	if (!statusSlug) {
		return { /* –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–∫—Ä—ã—Ç—ã */ };
	}

	return {
		showAgents: shouldShowNavItem('/agents'),
		showCurators: shouldShowNavItem('/curators'),
		showManagers: shouldShowNavItem('/managers'),
		// ... –∏ —Ç.–¥.
		hasAdminAccess: hasAdminAccess()
	};
}
```

## –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/Login:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω `admin.bonus.band` –∏–ª–∏ `rubonus.pro`
   - Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç credentials –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - Frontend –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/api/user`
   - Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º `status`
   - –û–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `status.slug = 'admin'` –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º:**
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `createAuthLoad` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `hasRouteAccess('admin', '/–ø—É—Ç—å')`
   - –î–ª—è –∞–¥–º–∏–Ω–æ–≤ (`routes: '*'`) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `true` –¥–ª—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**
   - Layout –≤—ã–∑—ã–≤–∞–µ—Ç `getNavigationVisibility()`
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `shouldShowNavItem('/–ø—É—Ç—å')`
   - –î–ª—è –∞–¥–º–∏–Ω–æ–≤ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é –≤–∏–¥–∏–º—ã

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–æ—Å—Ç—É–ø–∞

**–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (slug: 'admin'):**
```javascript
hasRouteAccess('admin', '/dashboard')    // true
hasRouteAccess('admin', '/projects')     // true
hasRouteAccess('admin', '/clients')      // true
hasRouteAccess('admin', '/finance')      // true
hasRouteAccess('admin', '/any-route')    // true - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
```

**–î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (slug: 'managers'):**
```javascript
hasRouteAccess('managers', '/dashboard')    // true (–æ–±—â–∏–π –º–∞—Ä—à—Ä—É—Ç)
hasRouteAccess('managers', '/projects')     // true (–≤ —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π)
hasRouteAccess('managers', '/clients')      // true (–≤ —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π)
hasRouteAccess('managers', '/finance')      // false (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞)
hasRouteAccess('managers', '/contractors')  // false (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞)
```

## –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –û–±—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã (–¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)
- `/` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `/dashboard` - –¥–∞—à–±–æ—Ä–¥
- `/profile` - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (Management)
- `/agents` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏
- `/curators` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä–∞—Ç–æ—Ä–∞–º–∏
- `/managers` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏
- `/designers` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–µ—Ä–∞–º–∏
- `/clients` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

### –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã (Counterparties)
- `/contractors` - –ø–æ–¥—Ä—è–¥—á–∏–∫–∏
- `/suppliers` - –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏
- `/delivery` - –¥–æ—Å—Ç–∞–≤–∫–∞
- `/services` - —Å–µ—Ä–≤–∏—Å—ã

### –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã (Business Processes)
- `/projects` - –ø—Ä–æ–µ–∫—Ç—ã
- `/tz` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è
- `/contracts` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- `/order` - –∑–∞–∫—É–ø–∫–∞
- `/complaints` - —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏
- `/finance` - —Ñ–∏–Ω–∞–Ω—Å—ã

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (Information)
- `/actions` - –∞–∫—Ü–∏–∏
- `/documentation` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

### 1. –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/lib/auth/status-permissions.js`:

```javascript
export const ROUTES = {
	// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
	NEW_ROUTE: '/new-route'
};

export const STATUS_PERMISSIONS = {
	[USER_STATUSES.ADMIN]: {
		routes: '*', // –∞–¥–º–∏–Ω—ã –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
	},
	[USER_STATUSES.MANAGERS]: {
		routes: [
			// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
			ROUTES.NEW_ROUTE // –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç
		]
	}
};
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/lib/utils/domainAccess.svelte.js`:

```javascript
export function getNavigationVisibility() {
	return {
		// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—É–Ω–∫—Ç—ã
		showNewRoute: shouldShowNavItem('/new-route')
	};
}
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –≤ layout (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—É–Ω–∫—Ç –º–µ–Ω—é)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/routes/(protected)/+layout.svelte`:

```svelte
{#if navigationVisibility.showNewRoute}
	<li>
		<a href="/new-route" class={getNavClassesWithSpan('/new-route')}>
			<span class={getSpanIconClasses('/new-route')}>Nr</span>
			<span class="truncate">–ù–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç</span>
		</a>
	</li>
{/if}
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
import { debugDomainState } from '$lib/utils/domainAccess.svelte.js';
debugDomainState();
```

–í—ã–≤–µ–¥–µ—Ç:
```
üîç Access Control Debug: {
  domain: { hostname, isAdminDomain, ... },
  user: { name, email, status },
  hasAdminAccess: true/false,
  navigationVisibility: { ... }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

```javascript
import { hasRouteAccess, getAllowedRoutes } from '$lib/auth/status-permissions.js';

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ä—à—Ä—É—Ç—É
hasRouteAccess('admin', '/finance'); // true

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
getAllowedRoutes('managers'); // ['/', '/dashboard', '/projects', ...]
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Server-side –ø—Ä–æ–≤–µ—Ä–∫–∞
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ `createAuthLoad`
‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/access-denied` –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–æ—Å—Ç—É–ø–∞
‚úÖ –ù–µ–ª—å–∑—è –æ–±–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Å –∫–ª–∏–µ–Ω—Ç–∞

### Client-side –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚úÖ –°–∫—Ä—ã—Ç–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é –¥–ª—è –ª—É—á—à–µ–≥–æ UX
‚úÖ –ù–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥—Å—Ç–≤–æ–º –∑–∞—â–∏—Ç—ã (—Ç–æ–ª—å–∫–æ server-side –ø—Ä–æ–≤–µ—Ä–∫–∞)

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–¥, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –¥–æ–º–µ–Ω –Ω–∞–ø—Ä—è–º—É—é:

**–ë—ã–ª–æ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞):**
```javascript
if (isAdminDomain()) {
  // –ø–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é
}
```

**–°—Ç–∞–ª–æ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞):**
```javascript
import { hasAdminAccess } from '$lib/utils/domainAccess.svelte.js';

if (hasAdminAccess()) {
  // –ø–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é
}
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Å—Ç–∞—Ç—É—Å–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- ‚úÖ –ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- ‚úÖ Server-side –∑–∞—â–∏—Ç–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å –ª—é–±–æ–≥–æ –¥–æ–º–µ–Ω–∞
